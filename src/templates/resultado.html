<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <title>Resultado do IMC</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
</head>
<body>
    <header>
        <h1>Resultado do IMC</h1>
    </header>

    <main>
        <div class="card-wrap">
            <div class="imc-card">
                <h3>ÍNDICE DE MASSA CORPORAL (IMC)</h3>
                <p class="sub">
                    Peso: <span id="peso-val">{{ peso }}</span> kg,
                    Altura: <span id="altura-val">{{ altura }}</span> cm
                </p>

                <div class="imc-value-wrap">
                    <div class="imc-value" id="valor-imc">{{ imc }}</div>
                    <div id="classificacao" class="status">{{ classificacao }}</div>
                </div>

                <div class="peso-ideal-title">PESO IDEAL</div>
                <div class="peso-ideal-value">
                    <strong id="peso-ideal">{{ peso_ideal }}</strong> kg
                </div>

                <div class="faixa-wrap">
                    <div class="faixa" aria-hidden="true">
                        <div class="faixa-seg magreza"></div>
                        <div class="faixa-seg normal"></div>
                        <div class="faixa-seg sobrepeso"></div>
                        <div class="faixa-seg obesidade"></div>
                        <div id="marcador" class="marcador"></div>
                    </div>

                    <div class="faixa-labels">
                        <span>18.5</span>
                        <span>25</span>
                        <span>30</span>
                        <span>40</span>
                    </div>
                    <div class="legenda">
                        <small>Magreza</small>
                        <small>Normal</small>
                        <small>Sobrepeso</small>
                        <small>Obesidade</small>
                    </div>
                </div>
            </div>
        </div>

        <a href="{{ url_for('index') }}" class="btn-voltar">Voltar</a>
    </main>

    <footer>
        &copy; 2025 Portal Saúde & Fitness
    </footer>

    <!-- Script que posiciona o marcador e aplica a cor conforme o IMC calculado no servidor -->
    <script>
        (function() {
            const imcStr = "{{ imc }}";
            const imc = parseFloat(imcStr);
            const classificacaoEl = document.getElementById('classificacao');
            const marcador = document.getElementById('marcador');

            // Ajusta classe de cor (mesma lógica do servidor)
            if (imc < 18.5) classificacaoEl.className = 'status magreza';
            else if (imc < 24.9) classificacaoEl.className = 'status normal';
            else if (imc < 29.9) classificacaoEl.className = 'status sobrepeso';
            else classificacaoEl.className = 'status obesidade';

            // Calcula posição do marcador (mesma fórmula usada no front-end)
            let pos = 0;
            if (imc < 18.5) pos = (imc / 18.5) * 25;
            else if (imc < 25) pos = 25 + ((imc - 18.5) / 6.4) * 25;
            else if (imc < 30) pos = 50 + ((imc - 25) / 5) * 25;
            else pos = 75 + ((imc - 30) / 10) * 25;

            marcador.style.left = `${Math.min(95, Math.max(0, pos))}%`;
        })();
    </script>
</body>
</html>

